import {test, expect} from '@playwright/test'
import { AboutSectionMenu } from '../../pages/aboutSection/AboutSectionMenu';
import { ClientVulnerabilityPage } from '../../pages/aboutSection/ClientVulnerabilityPage';

let aboutSectionMenu;
let clientVulnerabilityPage;


test.describe("Smoke_FCA_license(EN), Client Vulnerability", () => {
  test.beforeEach(async ({ page }) => {      
    await page.goto("https://capital.com/en-gb", {waitUntil: "domcontentloaded"});             
    aboutSectionMenu = new AboutSectionMenu(page);
    clientVulnerabilityPage = new ClientVulnerabilityPage(page);
    await aboutSectionMenu.openClientVulnerabilityPage();
  });


  test("FCA_License(EN), Sign Up Form is opened after clicking on the [Create your account] button, unauthorized user", 
    async ({page}) => {    
    await expect(page).toHaveURL("/en-gb/help/client-vulnerability");
    await clientVulnerabilityPage.clickCreateYourAccountButtonFromReady();    
  });
});

    test.describe("Smoke_SCA_License(EN), Client Vulnerability", () => {
      test.beforeEach(async ({ page }) => {
        await page.goto("/en-ae", {waitUntil: "domcontentloaded"});              
       
        aboutSectionMenu = new AboutSectionMenu(page);
        clientVulnerabilityPage = new ClientVulnerabilityPage(page);
         await aboutSectionMenu.openClientVulnerabilityPage();
      });

      test("Sign Up Form is opened after clicking on the [Create your account] button, unauthorized user", 
        async ({page}) => {
          await expect(page).toHaveURL("/en-ae/help/client-vulnerability");
          await clientVulnerabilityPage.clickCreateYourAccountButtonFromReady();          
        });
    });